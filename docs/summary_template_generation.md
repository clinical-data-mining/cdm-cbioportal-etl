# Summary File Template Generator
The `cdm-cbioportal-etl.summary.generate_cbioportal_template` function generates patient and sample summary template files. It loads sample and patient headers from object storage (using Minio), combines them with current patient and sample IDs, and then saves the processed data back to object storage. Additionally, the function removes specific samples that lack assays using a helper function `_remove_cases`.

The result creates a template following [cBioPortal's description for summary headers](https://docs.cbioportal.org/file-formats/#example-clinical-header)

## Components
### Constants
- `COL_P_ID`: A constant for the column name representing patient IDs ('PATIENT_ID').
- `COL_S_ID`: A constant for the column name representing sample IDs ('SAMPLE_ID').


### Main Function: `generate_cbioportal_template`
This is the core function responsible for generating the cBioPortal template files.

#### Parameters
- `env_minio`: A file containing Minio environment configurations to load and save data.
- `path_header_sample`: Path to the header file for the sample data, stored in object storage.
- `path_header_patient`: Path to the header file for the patient data, stored in object storage.
- `fname_cbio_sid`: Path to the file containing current patient and sample IDs. **This file is generated by the cBioPortal engineering team.**
- `fname_sample_rmv`: Path to the file containing the list of samples to be removed (those without assays). **Note: for future releases, this will be deprecated as `fname_cbio_sid` will contain appropriate list of IDs**.
- `fname_summary_template_p`: Path to the output file for the generated patient summary template.
- `fname_summary_template_s`: Path to the output file for the generated sample summary template.

#### Steps
- **MinioAPI Initialization**: The function begins by initializing a MinioAPI object with the provided Minio environment configuration (`env_minio`).
- **Loading Header Templates**: The function loads the sample and patient header templates from Minio, which define the structure of the cBioPortal templates. These templates are stored in `df_header_template_s` (sample header) and `df_header_template_p` (patient header).
- **Loading Current Sample/Patient IDs**: The current sample and patient identifiers are loaded from the file specified by `fname_cbio_sid`. Only the columns defined by `COL_S_ID` (sample ID) and `COL_P_ID` (patient ID) are loaded into a DataFrame (`df_id_current`).
- **Removing Samples Without Assays**: The helper function `_remove_cases` is used to remove samples that are listed in the `fname_sample_rmv` file, returning a filtered DataFrame (`df_id_current`).
- **Generating cBioPortal Template Files**: The sample and patient header templates are prepended to the data to form the final sample template DataFrame (`df_f_s`), and the deduplicated patient IDs form the patient template DataFrame (`df_f_p`).
- **Saving the Template Files**: The final sample and patient templates (`df_f_s` and `df_f_p`) are saved to Minio object storage in tab-separated format using the paths provided in `fname_summary_template_s` and `fname_summary_template_p`, respectively.


#### Returns:
The function does not return any value (None), but it saves the generated sample and patient templates to object storage.

### Utility Functions
#### `_remove_cases`
This helper function removes cases (samples) that do not have assays from the dataset.

#### Parameters:
- df: A DataFrame containing sample and patient IDs.
- fname_sample_rmv: A file that contains a list of sample IDs to be removed.

#### Returns:
A DataFrame where the samples listed in fname_sample_rmv are excluded.


